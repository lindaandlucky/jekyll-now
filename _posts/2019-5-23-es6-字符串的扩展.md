# 字符串的扩展

## 字符的unicode表示法

ES6 加强了对 Unicode 的支持，允许采用`\uxxxx`形式表示一个字符，其中`xxxx`表示字符的 Unicode 码点。

但是，这种表示法只限于码点在`\u0000`~`\uFFFF`之间的字符。超出这个范围的字符，必须用两个双字节的形式表示。

## 字符串的遍历器接口

es6为字符串添加了遍历器接口，使得字符串可以被for….of循环遍历

```js
for (let codePoint of "foo") {
  console.log(codePoint)
}
// "f"
// "o"
// "o"
```

## 模版字符串

模板字符串，都是用反引号表示。如果在模板字符串中需要使用反引号，则前面要用反斜杠转义。

如果使用模板字符串表示多行字符串，所有的空格和缩进都会被保留在输出之中。

模板字符串中嵌入变量，需要将变量名写在`${}`之中。

大括号内部可以放入任意的 JavaScript 表达式，可以进行运算，以及引用对象属性。

```js
let x = 1;
let y = 2;
`${x}+${y}=${x+y}` //1+2=3
`${x}+${y*2}=${x+y*2}`// "1 + 4 = 5"
let obj ={x:1,y:2}
`${obj.x+obj.y}`// "3"
```

模板字符串之中还能调用函数

```js
function fn() {
  return "hello";
}
`foo ${fn()} bar`
// 如果大括号中的值不是字符串，将按照一般的规则转为字符串。比如，大括号中是一个对象，将默认调用对象的toString方法
```

如果模版字符串中的变量没有申明，将报错

由于模版字符串的大括号内部就是执行js代码，因此如果大括号内部是一个字符串，将会原样输出.

模版字符串还能嵌套

```js
const tmpl =addrs=>`
 <table>
	${addrs.map(addr=>
   <tr><td>${addr.first}</td></tr>
    <tr><td>${addr.last}</td></tr>
`).join('')}
 </table>
  `;
```

如果需要引用模版字符串本身，在需要时执行，可以写成函数

```js
let func = (name)=>`hello${name}`;
func('jack')
// 在上面的代码中，模版字符串写成了一个函数的返回值。执行这个函数，就相当于执行这个模版字符串了。
```

## 实例： 模版编译

## 标签模版

模版字符串可以紧紧跟在一个函数名后面，该函数将被调用来处理这个模版字符串，称之为"标签模版"

标签模版不是模版，是函数调用的一种特殊形式

标签指的就是函数，紧跟在后面的模版字符串就是它的参数

但是，如果模版字符中有变量，就不是简单的调用了，而是会将模版字符串先处理成多个参数，再调用函数

